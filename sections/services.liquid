<section class="section search-section" id="search" aria-labelledby="search-label">

  <div class="container">
    <p class="section-subtitle" id="search-label">{{ section.settings.subtitle }}</p>
    
    <div class="search-wrapper">
      <form action="/search" method="get" class="search-form" role="search">
        <div class="search-input-wrapper">
          <input 
            type="search" 
            name="q" 
            placeholder="{{ section.settings.placeholder }}" 
            value="{{ search.terms | escape }}"
            class="search-input"
            aria-label="Search products"
          >
          <button type="submit" class="search-btn" aria-label="Submit search">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="11" cy="11" r="8"></circle>
              <path d="m21 21-4.35-4.35"></path>
            </svg>
          </button>
        </div>
      </form>

      {% if search.performed %}
        <div class="search-results">
          <p class="results-count">
            {% if search.results_count > 0 %}
              {{ search.results_count }} {% if search.results_count == 1 %}result{% else %}results{% endif %} found for "{{ search.terms }}"
            {% else %}
              No results found for "{{ search.terms }}"
            {% endif %}
          </p>

          {% if search.results_count > 0 %}
            <ul class="results-list">
              {% for item in search.results %}
                <li data-reveal>
                  <div class="result-card container">
                    
                    {% if item.featured_image %}
                      <img src="{{ item.featured_image | img_url: '340x380' }}" width="340" height="380" loading="lazy" alt="{{ item.title | escape }}" class="img">
                    {% endif %}

                    <div>
                      <h3 class="h3 card-title">{{ item.title }}</h3>

                      <p class="card-subtitle">
                        {% if item.price %}
                          {{ item.price | money }}
                        {% elsif item.content %}
                          {{ item.content | strip_html | truncate: 120 }}
                        {% else %}
                          {{ item.excerpt_or_content | strip_html | truncate: 120 }}
                        {% endif %}
                      </p>
                    </div>

                    <a href="{{ item.url }}" class="btn-icon" aria-label="View {{ item.title }}">
                      <svg xmlns="http://www.w3.org/2000/svg" width="43" height="20" viewBox="0 0 43 20" fill="none">
                        <path d="M0 10H41" stroke="black" stroke-width="2" />
                        <path d="M33 1L41.9 10.2727L33 19" stroke="black" stroke-width="2" />
                      </svg>
                    </a>

                  </div>
                </li>
              {% endfor %}
            </ul>

            {% if paginate.pages > 1 %}
              <div class="pagination">
                {% if paginate.previous %}
                  <a href="{{ paginate.previous.url }}" class="pagination-btn">Previous</a>
                {% endif %}
                
                <span class="pagination-info">Page {{ paginate.current_page }} of {{ paginate.pages }}</span>
                
                {% if paginate.next %}
                  <a href="{{ paginate.next.url }}" class="pagination-btn">Next</a>
                {% endif %}
              </div>
            {% endif %}
          {% endif %}
        </div>
      {% endif %}
    </div>
  </div>

</section>

<style>
.search-section { padding-inline: 15px; }

.search-section .section-subtitle {
  padding-inline: 10px;
  margin-block-end: 40px;
}

.search-wrapper {
  max-width: 100%;
}

.search-form {
  margin-block-end: 50px;
}

.search-input-wrapper {
  position: relative;
  display: flex;
  align-items: center;
  border: 1px solid black;
  padding: 15px 20px;
  background-color: var(--white);
}

.search-input {
  flex: 1;
  border: none;
  outline: none;
  font-size: var(--fs-7);
  font-family: inherit;
  background: transparent;
}

.search-btn {
  background: transparent;
  border: none;
  cursor: pointer;
  padding: 5px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: var(--transition-2);
}

.search-btn:hover {
  opacity: 0.7;
}

.search-results {
  margin-block-start: 40px;
}

.results-count {
  font-size: var(--fs-6);
  font-weight: var(--fw-500);
  margin-block-end: 30px;
  padding-inline: 10px;
}

.result-card .img { display: none; }

.results-list > li:not(:last-child) { border-block-start: 1px solid black; }

.results-list > li:last-child { border-block: 1px solid black; }

.result-card { padding: 30px 10px; }

.result-card .card-subtitle {
  color: black;
  font-size: var(--fs-7);
  font-weight: var(--fw-300);
  line-height: 1.5;
  margin-block: 10px 25px;
}

.result-card .btn-icon {
  width: 55px;
  height: 55px;
  border: 1px solid black;
  --bg-color: transparent;
  --hover-bg-color: gray;
  --hover-text-color: var(--black);
}

.result-card .btn-icon svg { width: 25px; }

.img {
  width: 300px;
  height: 300px;
  object-fit: cover;
}

.btn-icon {
  background-color: var(--bg-color, var(--white));
  border-radius: 50%;
  display: grid;
  place-content: center;
  transition: var(--transition-2);
}

.btn-icon path { transition: var(--transition-2); }

.btn-icon:is(:hover, :focus-visible) {
  background-color: var(--hover-bg-color, var(--white));
}

.btn-icon:is(:hover, :focus-visible) path {
  stroke: var(--hover-text-color, var(--black));
}

.pagination {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 20px;
  margin-block-start: 50px;
  padding-block: 30px;
  border-block-start: 1px solid black;
}

.pagination-btn {
  padding: 12px 30px;
  border: 1px solid black;
  text-decoration: none;
  color: black;
  transition: var(--transition-2);
}

.pagination-btn:hover {
  background-color: gray;
  color: white;
}

.pagination-info {
  font-size: var(--fs-7);
  font-weight: var(--fw-400);
}

@media (min-width: 768px) {
  .result-card {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .result-card .card-subtitle { margin-block-end: 15px; }
  
  .search-input-wrapper {
    padding: 20px 30px;
  }
}

@media (min-width: 992px) {
  .result-card { position: relative; }

  .result-card .img {
    display: block;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 200px;
    opacity: 0;
    visibility: hidden;
    transition: var(--transition-1);
    z-index: -1;
  }

  .result-card:is(:hover, :focus-within) .img {
    opacity: 1;
    visibility: visible;
  }
}

@media (min-width: 1200px) {
  .result-card { padding-block: 50px; }

  .result-card .card-subtitle { --fs-7: 2.4rem; }

  .result-card .img { width: max-content; }

  .result-card .btn-icon {
    width: 95px;
    height: 95px;
  }

  .result-card .btn-icon svg { width: 40px; }
  
  .search-input {
    font-size: 1.8rem;
  }
}

@media (min-width: 1400px) {
  .search-section { padding-inline: 70px; }

  .result-card { padding-block: 65px; }
}
</style>

{% schema %}
{
  "name": "Search Page",
  "settings": [
    {
      "type": "text",
      "id": "subtitle",
      "label": "Section Subtitle",
      "default": "Search Our Collection"
    },
    {
      "type": "text",
      "id": "placeholder",
      "label": "Search Placeholder",
      "default": "Search for perfumes, collections..."
    }
  ],
  "blocks": [],
  "presets": [
    {
      "name": "Search Page"
    }
  ]
}
{% endschema %}